{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Alert from\"react-native-web/dist/exports/Alert\";import Image from\"react-native-web/dist/exports/Image\";import StatusBar from\"react-native-web/dist/exports/StatusBar\";import{KeyboardAwareScrollView}from\"react-native-keyboard-aware-scroll-view\";import axios from\"axios\";import{SettingApp}from\"../appConfig\";import AsyncStorage from\"react-native-web/dist/exports/AsyncStorage\";var Profile=function(_React$Component){_inherits(Profile,_React$Component);function Profile(){var _getPrototypeOf2;var _this;_classCallCheck(this,Profile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Profile)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={User:\"\",username:\"\",Firstname:\"\",Lastname:\"\",address:\"\",Phone_num:\"\",driver:0};_this.componentDidMount=function _callee(){var value;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@User\"));case 3:value=_context.sent;if(!(value!==null)){_context.next=8;break;}_context.next=7;return _regeneratorRuntime.awrap(_this.setState({User:JSON.parse(value),username:JSON.parse(value).username,Firstname:JSON.parse(value).Firstname,Lastname:JSON.parse(value).Lastname,address:JSON.parse(value).address,Phone_num:JSON.parse(value).Phone_num,driver:JSON.parse(value).driver}));case 7:console.log(_this.state.User);case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:_this.fetchData();case 14:case\"end\":return _context.stop();}}},null,null,[[0,10]]);};_this.fetchData=function _callee2(){var response,users;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/user?user_id=\"+_this.state.User.user_id));case 2:response=_context2.sent;_context2.next=5;return _regeneratorRuntime.awrap(response.json());case 5:users=_context2.sent;_this.setState({username:users[0].username,Firstname:users[0].Firstname,Lastname:users[0].Lastname,address:users[0].address,Phone_num:users[0].Phone_num});console.log(_this.state);case 8:case\"end\":return _context2.stop();}}});};_this.submitFuction=function _callee3(){var navigation,_this$state,Firstname,Lastname,address,Phone_num,driver,User;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:navigation=_this.props.navigation;_this$state=_this.state,Firstname=_this$state.Firstname,Lastname=_this$state.Lastname,address=_this$state.address,Phone_num=_this$state.Phone_num,driver=_this$state.driver,User=_this$state.User;if(Firstname==\"\"||Lastname==\"\"||address==\"\"||Phone_num==\"\"){Alert.alert(\"กรุณากรอกข้อมูลให้ครบถ้วน\");}else{axios({url:SettingApp+\"/editProfile\",method:\"post\",data:{user_id:\"\"+User.user_id,Firstname:\"'\"+Firstname+\"'\",Lastname:\"'\"+Lastname+\"'\",address:\"'\"+address+\"'\",Phone_num:\"'\"+Phone_num+\"'\"},headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}}).then(function(response){console.log(response.status);if(response.status==200)AsyncStorage.getItem(\"@User\").then(function(dataStorage){dataStorage=JSON.parse(dataStorage);console.log({dataStorage:dataStorage});dataStorage.Firstname=Firstname;dataStorage.Lastname=Lastname;dataStorage.address=address;dataStorage.Phone_num=Phone_num;console.log({dataStorage:dataStorage});AsyncStorage.setItem(\"@User\",JSON.stringify(dataStorage));}).done();Alert.alert(\"แก้ไขข้อมูลส่วนตัวเรียบร้อย\");if(driver==\"1\")navigation.navigate(\"WorkTime\");else navigation.navigate(\"Menu\");}).catch(function(error){console.log(error);});}case 3:case\"end\":return _context3.stop();}}});};return _this;}_createClass(Profile,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(KeyboardAwareScrollView,null,React.createElement(StatusBar,{barStyle:\"dark-content\"}),React.createElement(View,{style:styles.container},React.createElement(Image,{source:require(\"../assets/images/logo.png\"),style:styles.welcomeImage}),React.createElement(Text,{style:styles.TextTitle},\" username \"),React.createElement(TextInput,{placeholder:\"username\",style:styles.InputFixStyle,onChangeText:function onChangeText(username){return _this2.setState({username:username});},value:this.state.username,editable:false}),React.createElement(Text,{style:styles.TextTitle},\" Firstname \"),React.createElement(TextInput,{placeholder:\"Firstname\",style:styles.InputStyle,onChangeText:function onChangeText(Firstname){return _this2.setState({Firstname:Firstname});},value:this.state.Firstname}),React.createElement(Text,{style:styles.TextTitle},\" Lastname \"),React.createElement(TextInput,{placeholder:\"Lastname\",style:styles.InputStyle,onChangeText:function onChangeText(Lastname){return _this2.setState({Lastname:Lastname});},value:this.state.Lastname}),React.createElement(Text,{style:styles.TextTitle},\" Address \"),React.createElement(TextInput,{placeholder:\"Address\",style:styles.InputStyle,onChangeText:function onChangeText(address){return _this2.setState({address:address});},value:this.state.address}),React.createElement(Text,{style:styles.TextTitle},\" Phone Number \"),React.createElement(TextInput,{placeholder:\"Phone Number\",style:styles.InputStyle,keyboardType:\"phone-pad\",onChangeText:function onChangeText(Phone_num){return _this2.setState({Phone_num:Phone_num});},value:this.state.Phone_num,maxLength:10}),React.createElement(TouchableOpacity,{style:styles.loginScreenButton,underlayColor:\"#fff\",onPress:function onPress(){return _this2.submitFuction();}},React.createElement(Text,{style:styles.Submit},\"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"))));}}]);return Profile;}(React.Component);Profile.navigationOptions={title:\"Profile\",gesturesEnabled:false};export{Profile as default};var styles=StyleSheet.create({container:{backgroundColor:\"#fff\",flex:3,justifyContent:\"center\",alignItems:\"center\",paddingTop:80},welcomeContainer:{justifyContent:\"center\",alignItems:\"center\",marginTop:20,marginBottom:20},TextTitle:{fontSize:20,width:330,marginTop:10,marginBottom:10,color:\"grey\"},InputStyle:{fontSize:20,width:330,height:50,backgroundColor:\"rgb(240, 240, 240)\",borderRadius:25,marginBottom:20,paddingLeft:20,color:\"grey\"},InputFixStyle:{fontSize:20,width:330,height:50,backgroundColor:\"rgb(240, 240, 240)\",borderRadius:25,marginBottom:20,paddingLeft:20,color:\"lightgrey\"},loginScreenButton:{width:330,height:50,marginRight:40,marginLeft:40,marginTop:10,paddingTop:10,paddingBottom:10,backgroundColor:\"rgb(29, 25, 204)\",borderRadius:25,borderWidth:1,borderColor:\"#fff\",marginBottom:40},Submit:{fontSize:20.0,color:\"#fff\",textAlign:\"center\",paddingLeft:10,paddingRight:10},welcomeImage:{width:100,height:100,resizeMode:\"contain\",marginTop:-20,marginBottom:10}});","map":{"version":3,"sources":["/Users/thanutpond/Desktop/whereApp/screens/Profile.js"],"names":["React","KeyboardAwareScrollView","axios","SettingApp","Profile","state","User","username","Firstname","Lastname","address","Phone_num","driver","componentDidMount","AsyncStorage","getItem","value","setState","JSON","parse","console","log","fetchData","fetch","user_id","response","json","users","submitFuction","navigation","props","Alert","alert","url","method","data","headers","Accept","then","status","dataStorage","setItem","stringify","done","navigate","catch","error","styles","container","require","welcomeImage","TextTitle","InputFixStyle","InputStyle","loginScreenButton","Submit","Component","navigationOptions","title","gesturesEnabled","StyleSheet","create","backgroundColor","flex","justifyContent","alignItems","paddingTop","welcomeContainer","marginTop","marginBottom","fontSize","width","color","height","borderRadius","paddingLeft","marginRight","marginLeft","paddingBottom","borderWidth","borderColor","textAlign","paddingRight","resizeMode"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n  TextInput,\n  Alert,\n  Image,\n  StatusBar\n} from \"react-native\";\nimport { KeyboardAwareScrollView } from \"react-native-keyboard-aware-scroll-view\";\nimport axios from \"axios\";\nimport { SettingApp } from \"../appConfig\";\nimport { AsyncStorage } from \"react-native\";\n\nexport default class Profile extends React.Component {\n  static navigationOptions = {\n    title: \"Profile\",\n    gesturesEnabled: false,\n  };\n\n  state = {\n    User: \"\",\n    username: \"\",\n    Firstname: \"\",\n    Lastname: \"\",\n    address: \"\",\n    Phone_num: \"\",\n    driver : 0\n  };\n\n  componentDidMount = async () => {\n    try { //ดึงค่าจาก Localstorage\n      const value = await AsyncStorage.getItem(\"@User\");\n      if (value !== null) {\n        await this.setState({ //นำค่าใน Localstorage มาใส่ไว้ในตัวแปร\n          User: JSON.parse(value),\n          username: JSON.parse(value).username,\n          Firstname: JSON.parse(value).Firstname,\n          Lastname: JSON.parse(value).Lastname,\n          address: JSON.parse(value).address,\n          Phone_num: JSON.parse(value).Phone_num,\n          driver: JSON.parse(value).driver\n        });\n        console.log(this.state.User);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n\n    this.fetchData(); //เรียกฟังชั่น\n  };\n\n  fetchData = async () => {\n    //ดึงค่าจาก Database มาเพื่อแสดงในแต่ละฟิล\n    const response = await fetch(\n      `${SettingApp}/user?user_id=${this.state.User.user_id}`\n    ); \n    const users = await response.json();\n    //นำค่าที่ได้เก็บไว้ในตัวแปรที่ตั้งไว้\n    this.setState({\n      username: users[0].username,\n      Firstname: users[0].Firstname, \n      Lastname: users[0].Lastname,\n      address: users[0].address,\n      Phone_num: users[0].Phone_num\n    });\n\n    console.log(this.state);\n  };\n\n  submitFuction = async () => { \n    const { navigation } = this.props;\n    let { Firstname, Lastname, address, Phone_num, driver, User } = this.state;\n\n    //เช็คว่าข้อมูลครบมั้ย\n    if (Firstname == \"\" || Lastname == \"\" || address == \"\" || Phone_num == \"\") {\n      Alert.alert(\"กรุณากรอกข้อมูลให้ครบถ้วน\");\n    } else {\n      //ส่งค่าไปที่หลังบ้านเพื่อเปลี่ยนข้อมูลส้วนตัว\n      axios({\n        url: `${SettingApp}/editProfile`,\n        method: \"post\",\n        data: {\n          user_id: `${User.user_id}`,\n          Firstname: `'${Firstname}'`,\n          Lastname: `'${Lastname}'`,\n          address: `'${address}'`,\n          Phone_num: `'${Phone_num}'`\n        },\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        }\n      })\n        .then(function(response) {\n          console.log(response.status);\n          if (response.status == 200)\n            // นำค่าจาก Localstorage มาเปลี่ยนแปลง\n            AsyncStorage.getItem(\"@User\")\n              .then(dataStorage => {\n                dataStorage = JSON.parse(dataStorage);\n                console.log({ dataStorage });\n                dataStorage.Firstname = Firstname;\n                dataStorage.Lastname = Lastname;\n                dataStorage.address = address;\n                dataStorage.Phone_num = Phone_num;\n                console.log({ dataStorage });\n                AsyncStorage.setItem(\"@User\", JSON.stringify(dataStorage));\n              })\n              .done();\n          Alert.alert(\"แก้ไขข้อมูลส่วนตัวเรียบร้อย\");\n\n              //ถ้าเป็น Driver ไปที่หน้า WorkTime ถ้าไม่ใช่ไปที่หน้า Menu\n          if (driver == \"1\") navigation.navigate(\"WorkTime\");\n          else navigation.navigate(\"Menu\");\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    }\n  };\n\n  render() {\n    return (\n      <KeyboardAwareScrollView>\n        <StatusBar barStyle=\"dark-content\" />\n        <View style={styles.container}>\n          <Image\n            source={require(\"../assets/images/logo.png\")}\n            style={styles.welcomeImage}\n          />\n\n          <Text style={styles.TextTitle}> username </Text>\n          <TextInput\n            placeholder=\"username\"\n            style={styles.InputFixStyle}\n            // keyboardType=\"email-address\"\n            onChangeText={username => this.setState({ username })}\n            value={this.state.username}\n            editable={false}\n          />\n          <Text style={styles.TextTitle}> Firstname </Text>\n          <TextInput\n            placeholder=\"Firstname\"\n            style={styles.InputStyle}\n            onChangeText={Firstname => this.setState({ Firstname })}\n            value={this.state.Firstname}\n          />\n          <Text style={styles.TextTitle}> Lastname </Text>\n          <TextInput\n            placeholder=\"Lastname\"\n            style={styles.InputStyle}\n            onChangeText={Lastname => this.setState({ Lastname })}\n            value={this.state.Lastname}\n          />\n          <Text style={styles.TextTitle}> Address </Text>\n          <TextInput\n            placeholder=\"Address\"\n            style={styles.InputStyle}\n            onChangeText={address => this.setState({ address })}\n            value={this.state.address}\n          />\n          <Text style={styles.TextTitle}> Phone Number </Text>\n          <TextInput\n            placeholder=\"Phone Number\"\n            style={styles.InputStyle}\n            keyboardType=\"phone-pad\"\n            onChangeText={Phone_num => this.setState({ Phone_num })}\n            value={this.state.Phone_num}\n            maxLength={10}\n          />\n\n          <TouchableOpacity\n            style={styles.loginScreenButton}\n            underlayColor=\"#fff\"\n            onPress={() => this.submitFuction()}\n          >\n            <Text style={styles.Submit}>ยืนยัน</Text>\n          </TouchableOpacity>\n        </View>\n      </KeyboardAwareScrollView>\n    );\n  }\n}\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#fff\",\n    flex: 3,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    paddingTop: 80\n  },\n  welcomeContainer: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 20,\n    marginBottom: 20\n  },\n  TextTitle : {\n    fontSize:20,\n    width: 330,\n    marginTop: 10,\n    marginBottom: 10,\n    color: \"grey\"\n  },\n  InputStyle: {\n    fontSize:20,\n    width: 330,\n    height: 50,\n    backgroundColor: \"rgb(240, 240, 240)\",\n    borderRadius: 25,\n    marginBottom: 20,\n    paddingLeft: 20,\n    color: \"grey\"\n  },\n  InputFixStyle: {\n    fontSize:20,\n    width: 330,\n    height: 50,\n    backgroundColor: \"rgb(240, 240, 240)\",\n    borderRadius: 25,\n    marginBottom: 20,\n    paddingLeft: 20,\n    color: \"lightgrey\"\n  },\n  loginScreenButton: {\n    width: 330,\n    height: 50,\n    marginRight: 40,\n    marginLeft: 40,\n    marginTop: 10,\n    paddingTop: 10,\n    paddingBottom: 10,\n    backgroundColor: \"rgb(29, 25, 204)\",\n    borderRadius: 25,\n    borderWidth: 1,\n    borderColor: \"#fff\",\n    marginBottom: 40\n  },\n  Submit: {\n    fontSize: 20.0,\n    color: \"#fff\",\n    textAlign: \"center\",\n    paddingLeft: 10,\n    paddingRight: 10,\n  },\n  welcomeImage: {\n    width: 100,\n    height: 100,\n    resizeMode: \"contain\",\n    marginTop: -20,\n    marginBottom: 10\n  }\n});\n"]},"metadata":{},"sourceType":"module"}