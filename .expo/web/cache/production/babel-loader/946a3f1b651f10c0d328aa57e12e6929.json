{"ast":null,"code":"import _taggedTemplateLiteralLoose from\"@babel/runtime/helpers/taggedTemplateLiteralLoose\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function _templateObject3(){var data=_taggedTemplateLiteralLoose([\"\\n  fontSize: 30;\\n  color: 'rgb(101,102,251)';\\n  textAlign: center;\\n  paddingLeft: 10;\\n  paddingRight: 10;\\n  marginTop: 10;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteralLoose([\"\\n  width: \",\";\\n  height: 90;\\n  backgroundColor: white;\\n  borderRadius: 60;\\n  borderBottomEndRadius :  0;\\n  borderBottomStartRadius :  0;\\n  borderWidth: 0;\\n  justifyContent: center;\\n  alignItems: center;\\n  marginTop : \",\";\\n  marginBottom : \",\"\\n  flexDirection: row;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteralLoose([\"\\n  width: \",\";\\n  height: \",\";\\n  position:absolute;\\n  top:\",\";   \\n  backgroundColor: 'rgb(29,25,204)';\\n  borderRadius: 60;\\n  borderBottomEndRadius :  0;\\n  borderBottomStartRadius :  0;\\n  borderWidth: 0;\\n  justifyContent: flex-start;\\n  alignItems: center;\\n  paddingTop : 15;\\n  paddingBottom : 50;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from\"react\";import{Component}from\"react-native-web/dist/index\";import{PropTypes}from\"react-native-web/dist/index\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StatusBar from\"react-native-web/dist/exports/StatusBar\";import Image from\"react-native-web/dist/exports/Image\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Button from\"react-native-web/dist/exports/Button\";import Alert from\"react-native-web/dist/exports/Alert\";import AsyncStorage from\"react-native-web/dist/exports/AsyncStorage\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Keyboard from\"react-native-web/dist/exports/Keyboard\";import Drawer from\"react-native-drawer\";import MapView,{PROVIDER_GOOGLE}from\"react-native-maps\";import{Marker}from\"react-native-maps\";import BusStopIcon from\"../components/BusStop\";import BusActive from\"../components/BusActive\";import VanBreakDown from\"../components/VanBreakDown\";import BoatBreakDown from\"../components/BoatBreakDown\";import TruckBreakDown from\"../components/TruckBreakDown\";import BusBreakDown from\"../components/BusBreakDown\";import TruckActive from\"../components/TruckActive\";import VanActive from\"../components/VanActive\";import BoatActive from\"../components/BoatActive\";import BusStopDetail from\"../components/BusStopDetail\";import styled from\"styled-components\";import{SettingApp}from\"../appConfig\";import moment from\"moment\";import\"moment/locale/th\";moment.locale(\"th\");var App=function(_React$Component){_inherits(App,_React$Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={drawerOpen:false,drawerDisabled:false,typing:false,searchTxt:\"\",openMenu:false,markers:[{title:\"Your Location\",description:\"คุณอยู่ที่นี่\"}],open:false,User:'',region:{latitude:0,longitude:0,latitudeDelta:0.015,longitudeDelta:0.0121},tempRegion:{},latlng:{latitude:0,longitude:0},busStop:[],busLine:[],BusActive:[]};_this.componentDidMount=function _callee(){var value;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.props.navigation.setParams({OpenDrawer:_this.openDrawer});_context.prev=1;_context.next=4;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@User\"));case 4:value=_context.sent;if(!(value!==null)){_context.next=8;break;}_context.next=8;return _regeneratorRuntime.awrap(_this.setState({User:JSON.parse(value)}));case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 13:_context.next=15;return _regeneratorRuntime.awrap(_this.getLocation());case 15:_context.next=17;return _regeneratorRuntime.awrap(_this.fetchData());case 17:_context.next=19;return _regeneratorRuntime.awrap(_this.fetchbusLineData());case 19:_context.next=21;return _regeneratorRuntime.awrap(_this.fetchbusActiveData());case 21:_this.intervalID=setInterval(function(){return _this.RefreshMaps();},5000);case 22:case\"end\":return _context.stop();}}},null,null,[[1,10]]);};_this.closeDrawer=function(){_this._drawer.close();};_this.openDrawer=function(){console.log(\"this.state.drawerOpen ::: \",_this.state.drawerOpen);_this.state.drawerOpen?_this._drawer.close():_this._drawer.open();_this.setState({drawerOpen:!_this.state.drawerOpen});};_this.goto=function(page){var navigation=_this.props.navigation;_this._drawer.close();if(page==\"logout\"){Alert.alert(\"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\",\"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E43\\u0E0A\\u0E48\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\",[{text:\"Cancel\",style:\"cancel\"},{text:\"OK\",onPress:function onPress(){AsyncStorage.clear();navigation.navigate(\"Home\");}}],{cancelable:false});}else{navigation.navigate(page);}};_this.RefreshMaps=function _callee2(){var value;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('state ::: ',_this.state.region);_context2.prev=1;_context2.next=4;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@region\"));case 4:value=_context2.sent;if(!(value!==null)){_context2.next=9;break;}console.log('AsyncStorage ::: ',value);_context2.next=9;return _regeneratorRuntime.awrap(_this.setState({region:JSON.parse(value)}));case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 14:_context2.next=16;return _regeneratorRuntime.awrap(_this.fetchbusActiveData());case 16:case\"end\":return _context2.stop();}}},null,null,[[1,11]]);};_this.fetchData=function _callee3(){var searchTxt,response,busStop,_response,tempBusStop,_busStop;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchTxt=_this.state.searchTxt;if(!(searchTxt==\"\")){_context3.next=12;break;}_context3.next=4;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/busStop?searchText=\"+_this.state.searchTxt));case 4:response=_context3.sent;_context3.next=7;return _regeneratorRuntime.awrap(response.json());case 7:busStop=_context3.sent;_context3.next=10;return _regeneratorRuntime.awrap(_this.setState({busStop:busStop}));case 10:_context3.next=21;break;case 12:_context3.next=14;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/SearchBusStop?searchText=\"+_this.state.searchTxt));case 14:_response=_context3.sent;_context3.next=17;return _regeneratorRuntime.awrap(_response.json());case 17:tempBusStop=_context3.sent;_busStop=tempBusStop[1];_context3.next=21;return _regeneratorRuntime.awrap(_this.setState({busStop:_busStop}));case 21:case\"end\":return _context3.stop();}}});};_this.fetchbusLineData=function _callee4(){var searchTxt,response,busLine,BuslineTemp,_response2,_busLine,busLine2,_BuslineTemp;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:searchTxt=_this.state.searchTxt;if(!(searchTxt==\"\")){_context4.next=14;break;}_context4.next=4;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/busLine?searchText=\"+_this.state.searchTxt));case 4:response=_context4.sent;_context4.next=7;return _regeneratorRuntime.awrap(response.json());case 7:busLine=_context4.sent;BuslineTemp=[];busLine.map(function(e){BuslineTemp.push({data:e,show:false});});_context4.next=12;return _regeneratorRuntime.awrap(_this.setState({busLine:BuslineTemp}));case 12:_context4.next=25;break;case 14:_context4.next=16;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/SearchBusStop?searchText=\"+_this.state.searchTxt));case 16:_response2=_context4.sent;_context4.next=19;return _regeneratorRuntime.awrap(_response2.json());case 19:_busLine=_context4.sent;busLine2=_busLine[0];_BuslineTemp=[];busLine2.map(function(e,key){_BuslineTemp.push({data:e,show:false});});_context4.next=25;return _regeneratorRuntime.awrap(_this.setState({busLine:_BuslineTemp}));case 25:case\"end\":return _context4.stop();}}});};_this.getLocation=function _callee5(){return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log('in geo');navigator.geolocation.getCurrentPosition(function(position){var latlng={latitude:parseFloat(JSON.stringify(position.coords.latitude)),longitude:parseFloat(JSON.stringify(position.coords.longitude))};var region={latitude:parseFloat(JSON.stringify(position.coords.latitude)),longitude:parseFloat(JSON.stringify(position.coords.longitude)),latitudeDelta:_this.state.region.latitudeDelta,longitudeDelta:_this.state.region.longitudeDelta};try{AsyncStorage.setItem('@region',JSON.stringify(region));}catch(error){console.log(error);}_this.setState({latlng:latlng,region:region});},function(error){return alert(error.message);},{enableHighAccuracy:true,timeout:20000,maximumAge:1000});_context5.next=4;return _regeneratorRuntime.awrap(navigator.geolocation.watchPosition(function(position){var latlng={latitude:parseFloat(JSON.stringify(position.coords.latitude)),longitude:parseFloat(JSON.stringify(position.coords.longitude))};var region={latitude:parseFloat(JSON.stringify(position.coords.latitude)),longitude:parseFloat(JSON.stringify(position.coords.longitude)),latitudeDelta:_this.state.region.latitudeDelta,longitudeDelta:_this.state.region.longitudeDelta};try{AsyncStorage.setItem('@region',JSON.stringify(region));}catch(error){console.log(error);}_this.setState({latlng:latlng,region:region});}));case 4:_this.watchID=_context5.sent;case 5:case\"end\":return _context5.stop();}}});};_this.fetchbusActiveData=function _callee6(){var _this$state,searchTxt,busLine,lineQuery,response,_BusActive,_response3,_BusActive2;return _regeneratorRuntime.async(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$state=_this.state,searchTxt=_this$state.searchTxt,busLine=_this$state.busLine;lineQuery=[];if(!(searchTxt==\"\")){_context6.next=13;break;}_context6.next=5;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/getVehicleActive\"));case 5:response=_context6.sent;_context6.next=8;return _regeneratorRuntime.awrap(response.json());case 8:_BusActive=_context6.sent;_context6.next=11;return _regeneratorRuntime.awrap(_this.setState({BusActive:_BusActive}));case 11:_context6.next=22;break;case 13:busLine.map(function(item){lineQuery.push(item.data.busline_code);});_context6.next=16;return _regeneratorRuntime.awrap(fetch(SettingApp+\"/getVehicleActiveQuery?Vehicle_Type='bus'&lineQuery=\"+lineQuery));case 16:_response3=_context6.sent;_context6.next=19;return _regeneratorRuntime.awrap(_response3.json());case 19:_BusActive2=_context6.sent;_context6.next=22;return _regeneratorRuntime.awrap(_this.setState({BusActive:_BusActive2}));case 22:case\"end\":return _context6.stop();}}});};_this.componentWillUnmount=function(){navigator.geolocation.clearWatch(_this.watchID);clearInterval(_this.intervalID);};_this.onOutFocus=function _callee7(){return _regeneratorRuntime.async(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:Keyboard.dismiss();_context7.next=3;return _regeneratorRuntime.awrap(_this.setState({typing:false,searchTxt:''}));case 3:_context7.next=5;return _regeneratorRuntime.awrap(_this.fetchData());case 5:_context7.next=7;return _regeneratorRuntime.awrap(_this.fetchbusLineData());case 7:_context7.next=9;return _regeneratorRuntime.awrap(_this.fetchbusActiveData());case 9:case\"end\":return _context7.stop();}}});};_this.onSearchSubmit=function _callee8(){return _regeneratorRuntime.async(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _regeneratorRuntime.awrap(_this.setState({typing:false}));case 2:_context8.next=4;return _regeneratorRuntime.awrap(_this.fetchData());case 4:_context8.next=6;return _regeneratorRuntime.awrap(_this.fetchbusLineData());case 6:_context8.next=8;return _regeneratorRuntime.awrap(_this.fetchbusActiveData());case 8:case\"end\":return _context8.stop();}}});};_this.openDetail=function(id){var busLine=_this.state.busLine;var tempIndex=busLine.findIndex(function(e){return e.data.busline_code==id;});busLine[tempIndex].show=!busLine[tempIndex].show;_this.setState({busLine:busLine});};_this.onRegionChangeComplete=function _callee9(region){return _regeneratorRuntime.async(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return _regeneratorRuntime.awrap(AsyncStorage.setItem('@region',JSON.stringify(region)));case 3:_context9.next=8;break;case 5:_context9.prev=5;_context9.t0=_context9[\"catch\"](0);console.log(_context9.t0);case 8:case\"end\":return _context9.stop();}}},null,null,[[0,5]]);};_this.openMenuFunc=function _callee10(){var value;return _regeneratorRuntime.async(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@region\"));case 3:value=_context10.sent;if(!(value!==null)){_context10.next=7;break;}_context10.next=7;return _regeneratorRuntime.awrap(_this.setState({region:JSON.parse(value)}));case 7:_context10.next=12;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](0);console.log(_context10.t0);case 12:_this.setState({openMenu:!_this.state.openMenu});case 13:case\"end\":return _context10.stop();}}},null,null,[[0,9]]);};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(Drawer,{ref:function ref(_ref){return _this2._drawer=_ref;},type:\"static\",content:React.createElement(ScrollView,{style:styles.containerIn},React.createElement(TouchableOpacity,{style:styles.buttonActive,onPress:function onPress(){return _this2.goto(\"Menu\");}},React.createElement(Image,{style:styles.MenuItem,source:require(\"../assets/icon/home.png\")}),React.createElement(Text,{style:styles.TextItem},\"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E41\\u0E23\\u0E01 \")),React.createElement(TouchableOpacity,{style:styles.button,onPress:function onPress(){return _this2.goto(\"Profile\");}},React.createElement(Image,{style:styles.MenuItem,source:require(\"../assets/icon/profile.png\")}),React.createElement(Text,{style:styles.TextItem},\"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E31\\u0E27\")),React.createElement(TouchableOpacity,{style:styles.button,onPress:function onPress(){return _this2.goto(\"logout\");}},React.createElement(Image,{style:styles.MenuItem,source:require(\"../assets/icon/logout.png\")}),React.createElement(Text,{style:styles.TextItem},\"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"))),styles:{main:{shadowColor:\"#000000\",shadowOpacity:0.3,shadowRadius:15}},captureGestures:false,tweenDuration:100,panThreshold:0.08,disabled:this.state.drawerDisabled,openDrawerOffset:function openDrawerOffset(viewport){return 160;},closedDrawerOffset:function closedDrawerOffset(){return 1;},negotiatePan:true},React.createElement(View,{style:styles.container},React.createElement(StatusBar,{barStyle:\"dark-content\"}),React.createElement(MapView,{provider:PROVIDER_GOOGLE,style:styles.map,onRegionChange:this.onRegionChangeComplete,region:this.state.region},this.state.busStop.map(function(marker,key){var LatLng={latitude:parseFloat(marker.latitude),longitude:parseFloat(marker.longitude)};return React.createElement(Marker,{key:key,coordinate:LatLng,title:marker.busstop_name,description:marker.description},React.createElement(BusStopIcon,{textLine:marker.busline_name}));}),this.state.BusActive.map(function(marker,key){var LatLng={latitude:parseFloat(marker.lat)||10000,longitude:parseFloat(marker.lon)||10000};return React.createElement(Marker,{key:key,coordinate:LatLng,title:marker.busstop_name,description:marker.Vehicle_Name},marker.Vehicle_Type==\"Bus\"&&marker.BreakDown_Status==0?React.createElement(BusActive,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Bus\"&&marker.BreakDown_Status==1?React.createElement(BusBreakDown,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Boat\"&&marker.BreakDown_Status==0?React.createElement(BoatActive,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Boat\"&&marker.BreakDown_Status==1?React.createElement(BoatBreakDown,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Van\"&&marker.BreakDown_Status==0?React.createElement(VanActive,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Van\"&&marker.BreakDown_Status==1?React.createElement(VanBreakDown,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Truck\"&&marker.BreakDown_Status==0?React.createElement(TruckActive,{textLine:marker.busline_code}):marker.Vehicle_Type==\"Truck\"&&marker.BreakDown_Status==1?React.createElement(TruckBreakDown,{textLine:marker.busline_code}):React.createElement(React.Fragment,null));}),React.createElement(Marker,{coordinate:this.state.latlng,title:this.state.markers.title,description:this.state.markers.description},React.createElement(View,null,React.createElement(Image,{source:require(\"../assets/icon/self-map-marker.png\"),style:{width:70,height:70,zIndex:100}})))),React.createElement(MenuSlide,{openMenu:this.state.openMenu},React.createElement(TouchableOpacity,{style:{width:Dimensions.get(\"window\").width},onPress:function onPress(){return _this2.openMenuFunc();}},React.createElement(TextMenuSlide,{openMenu:this.state.openMenu},\"Bus\")),React.createElement(TouchableOpacity,{style:styles.Line,onPress:function onPress(){return _this2.openMenuFunc();}}),React.createElement(ScrollView,null,this.state.busLine.map(function(item,key){return React.createElement(BusStopDetail,{key:key,data:item.data,show:item.show,openDetail:_this2.openDetail});}))),React.createElement(SearchTab,{typing:this.state.typing},React.createElement(Image,{source:require(\"../assets/icon/search.png\"),style:{width:30,height:30},onPress:function onPress(){return _this2.setState({typing:false});}}),React.createElement(TextInput,{placeholder:\"Where to ?\",style:styles.InputStyle,onChangeText:function onChangeText(searchTxt){return _this2.setState({searchTxt:searchTxt});},value:this.state.searchTxt,blurOnSubmit:true,onFocus:function onFocus(){return _this2.setState({typing:true});},onSubmitEditing:function onSubmitEditing(){return _this2.onSearchSubmit();}}),this.state.typing&&React.createElement(TouchableOpacity,{onPress:function onPress(){return _this2.onOutFocus();}},React.createElement(Image,{source:require(\"../assets/icon/close.png\"),style:{width:20,height:20}})))));}}]);return App;}(React.Component);App.navigationOptions=function(_ref2){var navigation=_ref2.navigation;return{gesturesEnabled:false,headerLeft:function headerLeft(){return React.createElement(TouchableOpacity,{onPress:navigation.getParam(\"OpenDrawer\")},React.createElement(Image,{style:styles.MenuStyle,source:require(\"../assets/icon/menu.png\")}));}};};export{App as default};var styles=StyleSheet.create({menuFlex:{flexDirection:\"row\"},LogoStyle:{width:130,height:130,marginBottom:50,resizeMode:\"contain\"},space:{width:30},containerIn:{backgroundColor:\"white\",flex:1},button:{backgroundColor:\"white\",padding:10,flexDirection:\"row\",alignItems:\"center\",paddingStart:20,paddingTop:25,paddingBottom:25,borderBottomColor:\"#1C19CC\",borderBottomWidth:1},buttonActive:{backgroundColor:\"lightgrey\",padding:10,flexDirection:\"row\",alignItems:\"center\",paddingStart:20,paddingTop:25,paddingBottom:25,borderBottomColor:\"#1C19CC\",borderBottomWidth:1},MenuStyle:{width:25,height:25,marginLeft:15},MenuItem:{width:25,height:25,marginRight:20},TextItem:{fontSize:20,color:\"#1C19CC\"},container:{flex:3,justifyContent:\"flex-end\",alignItems:\"center\"},map:_objectSpread({},StyleSheet.absoluteFillObject),Line:{width:90,height:6,backgroundColor:\"rgb(71, 69, 245)\",top:0,position:\"absolute\",borderRadius:50,marginTop:10},ViewFlex:{width:width-70,flexDirection:\"row\",paddingTop:20,paddingBottom:20,marginStart:30,marginEnd:30,justifyContent:\"flex-start\",alignItems:\"center\",borderBottomWidth:1,borderBottomColor:'rgba(255,255,255,0.5)'},LineFlex:{marginTop:20,width:300,height:0.5,backgroundColor:\"rgba(255,255,255,0.5)\",borderRadius:50},InputStyle:{marginTop:20,paddingBottom:20,fontSize:30,width:250,textAlign:\"center\",color:\"rgb(29, 25, 204)\"}});var width=Dimensions.get(\"window\").width;var height=Dimensions.get(\"window\").height;var MenuSlide=styled(View)(_templateObject(),width,function(props){return props.openMenu?500:150;},function(props){return props.openMenu?250:height-250;});var SearchTab=styled(View)(_templateObject2(),width,height-180,function(props){return props.typing?300:0;});var TextMenuSlide=styled(Text)(_templateObject3());","map":{"version":3,"sources":["/Users/thanutpond/Desktop/whereApp/screens/Menu.js"],"names":["React","Component","PropTypes","Drawer","MapView","PROVIDER_GOOGLE","Marker","BusStopIcon","BusActive","VanBreakDown","BoatBreakDown","TruckBreakDown","BusBreakDown","TruckActive","VanActive","BoatActive","BusStopDetail","styled","SettingApp","moment","locale","App","state","drawerOpen","drawerDisabled","typing","searchTxt","openMenu","markers","title","description","open","User","region","latitude","longitude","latitudeDelta","longitudeDelta","tempRegion","latlng","busStop","busLine","componentDidMount","props","navigation","setParams","OpenDrawer","openDrawer","AsyncStorage","getItem","value","setState","JSON","parse","console","log","getLocation","fetchData","fetchbusLineData","fetchbusActiveData","intervalID","setInterval","RefreshMaps","closeDrawer","_drawer","close","goto","page","Alert","alert","text","style","onPress","clear","navigate","cancelable","fetch","response","json","tempBusStop","BuslineTemp","map","e","push","data","show","busLine2","key","navigator","geolocation","getCurrentPosition","position","parseFloat","stringify","coords","setItem","error","message","enableHighAccuracy","timeout","maximumAge","watchPosition","watchID","lineQuery","item","busline_code","componentWillUnmount","clearWatch","clearInterval","onOutFocus","Keyboard","dismiss","onSearchSubmit","openDetail","id","tempIndex","findIndex","onRegionChangeComplete","openMenuFunc","ref","styles","containerIn","buttonActive","MenuItem","require","TextItem","button","main","shadowColor","shadowOpacity","shadowRadius","viewport","container","marker","LatLng","busstop_name","busline_name","lat","lon","Vehicle_Name","Vehicle_Type","BreakDown_Status","width","height","zIndex","Dimensions","get","Line","InputStyle","navigationOptions","gesturesEnabled","headerLeft","getParam","MenuStyle","StyleSheet","create","menuFlex","flexDirection","LogoStyle","marginBottom","resizeMode","space","backgroundColor","flex","padding","alignItems","paddingStart","paddingTop","paddingBottom","borderBottomColor","borderBottomWidth","marginLeft","marginRight","fontSize","color","justifyContent","absoluteFillObject","top","borderRadius","marginTop","ViewFlex","marginStart","marginEnd","LineFlex","textAlign","MenuSlide","View","SearchTab","TextMenuSlide","Text"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport {\n  Component,\n  PropTypes,\n  StyleSheet,\n  Text,\n  View,\n  TouchableOpacity,\n  StatusBar,\n  Image,\n  ScrollView,\n  Button,\n  Alert,\n  AsyncStorage,\n  Dimensions,\n  TextInput,\n  Keyboard,\n} from \"react-native\";\n\nimport Drawer from \"react-native-drawer\";\nimport MapView, { PROVIDER_GOOGLE } from \"react-native-maps\" // remove PROVIDER_GOOGLE import if not using Google Maps\nimport { Marker } from \"react-native-maps\"\nimport BusStopIcon from \"../components/BusStop\"\nimport BusActive from \"../components/BusActive\"\nimport VanBreakDown from \"../components/VanBreakDown\"\nimport BoatBreakDown from \"../components/BoatBreakDown\"\nimport TruckBreakDown from \"../components/TruckBreakDown\"\nimport BusBreakDown from \"../components/BusBreakDown\"\nimport TruckActive from \"../components/TruckActive\"\nimport VanActive from \"../components/VanActive\"\nimport BoatActive from \"../components/BoatActive\"\nimport BusStopDetail from \"../components/BusStopDetail\"\nimport styled from \"styled-components\"\nimport {SettingApp} from '../appConfig';\nimport moment from \"moment\";\nimport \"moment/locale/th\"; // without this line it didn't work\nmoment.locale(\"th\");\n\n\n\n\n\nexport default class App extends React.Component {\n  static navigationOptions = ({ navigation }) => {\n    return {\n      gesturesEnabled: false,\n      headerLeft: () => ( //สร้างฟังชั่นด้านบนซ้าย\n        // เรียกใช้ฟังชั่น OpenDrawer เพื่อเปิดเมนูด้านซ้าย\n        <TouchableOpacity onPress={navigation.getParam(\"OpenDrawer\")}>\n          <Image\n            style={styles.MenuStyle}\n            source={require(\"../assets/icon/menu.png\")}\n          />\n        </TouchableOpacity>\n      )\n    };\n  };\n \n\n  state = { \n    drawerOpen: false, // ตัวแปรสำหรับเปิดปิดเมนู\n    drawerDisabled: false,\n    typing: false, // check keyboard\n    searchTxt: \"\", // เก็บค่าคำที่ใช้ค้นหา\n    openMenu: false, // ค่าเปิดปิด Menu\n    markers: [ // เก็บค่าตำแหน่งปัจจุบันของ User\n      {\n        title: \"Your Location\",\n        description: \"คุณอยู่ที่นี่\"\n      }\n    ],\n    open : false, // ค่าเปิดปิด Search\n    User : '', // เก็บค่า User จาก Localstorage\n    region : { // เก็บค่าตำแหน่งของ Maps ขณะนั้น\n      latitude: 0, \n      longitude: 0,\n      latitudeDelta: 0.015,\n      longitudeDelta: 0.0121\n    },\n    tempRegion : {}, //  เก็บค่าตำแหน่งของ Maps ชั่วคราว\n    latlng: { //\n      latitude: 0,////////// UpdateState Every 5 Sec\n      longitude: 0\n    }, \n    busStop: [], // เก็บข้อมูลป้ายรถ\n    busLine: [],//// เก็บข้อมูลสายรถ\n    BusActive : [] ,// เก็บข้อมูลรถที่ทำงานอยู่\n  };\n\n  componentDidMount = async() =>  {\n    this.props.navigation.setParams({ OpenDrawer: this.openDrawer });\n    try { // ดึงข้อมูลจาก Localstorage\n      const value = await AsyncStorage.getItem(\"@User\");\n      if (value !== null) {\n        await this.setState({ User: JSON.parse(value) });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    // เรียกFunction\n    await this.getLocation()\n    await this.fetchData()\n    await this.fetchbusLineData()\n    await this.fetchbusActiveData()\n    // เรียกFunction ทุก 5 วิ\n    this.intervalID = setInterval(() => this.RefreshMaps(), 5000);\n  }\n\n  closeDrawer = () => { // ปิดเมนู\n    this._drawer.close();\n  };\n\n  openDrawer = () => { // เปิดเมนู\n    console.log(\"this.state.drawerOpen ::: \", this.state.drawerOpen)\n    \n    this.state.drawerOpen ? this._drawer.close() : this._drawer.open();\n    this.setState({\n      drawerOpen : !this.state.drawerOpen,\n    })\n  };\n\n  goto = page => { // ฟั่งชั่นเปลี่ยนหน้า\n    const { navigation } = this.props; // ดึงค่าจาก navigation\n    this._drawer.close(); //ปิดMenu\n    if (page == \"logout\") { // ถ้าเลือก logout จะถามก่อน\n      Alert.alert(\n        `กรุณายืนยัน`,\n        `คุณต้องการออกจากระบบใช่หรือไม่?`,\n        [\n          {\n            text: \"Cancel\",\n            style: \"cancel\"\n          },\n          {\n            text: \"OK\",\n            onPress: () => {\n              AsyncStorage.clear();\n              navigation.navigate(\"Home\");\n            }\n          }\n        ],\n        { cancelable: false }\n      );\n    } else {\n      navigation.navigate(page);\n    }\n  };\n// อัพเดทค่า Maps ทุก 5 วินาที\n  RefreshMaps = async () => {\n    console.log('state ::: ',this.state.region)\n    try { //ดึงค่าตำแหน่งของ Map ที่อยู่ใน Localstorage มาอัพเดท\n      const value = await AsyncStorage.getItem(\"@region\");\n      if (value !== null) {\n        console.log('AsyncStorage ::: ',value)\n        await this.setState({ region: JSON.parse(value) });\n\n      }\n    } catch (error) {\n      console.log(error);\n    }\n\n    // ดึงค่าตำแหน่งรถใหม่\n    await this.fetchbusActiveData()\n  };\n\n\n  // ส่งค่าสำหรับ Search ข้อมูลไปยังหลังบ้าน\n  fetchData = async () => {\n    let {searchTxt} = this.state\n    \n    // Check ว่ามีคำค้นหาหรือไม่\n    if(searchTxt == \"\"){\n      // ถ้าไม่มีให้ใช้ Api นี้\n      const response = await fetch(`${SettingApp}/busStop?searchText=${this.state.searchTxt}`)\n      const busStop = await response.json()\n      // console.log(\"busStop :::: \", busStop)\n      await this.setState({ busStop })\n    } else {\n      // ถ้ามีให้ใช้ Api นี้ พร้อมส่งตัวแปร searchText ไปด้วย\n      const response = await fetch(`${SettingApp}/SearchBusStop?searchText=${this.state.searchTxt}`)\n      const tempBusStop = await response.json() // แปลงค่าที่รับมาเป็น Json\n      const busStop = tempBusStop[1]  //นำค่าที่ได้ใส่ในตัวแปรนี้\n      await this.setState({ busStop })\n    }\n  }\n//////////////////////////////////////////////\n  fetchbusLineData = async () => { //ดึงข้อมูลสายรถ\n    let {searchTxt} = this.state\n    \n    if(searchTxt == \"\"){  // Check ว่ามีคำค้นหาหรือไม่\n      const response = await fetch(`${SettingApp}/busLine?searchText=${this.state.searchTxt}`)\n      const busLine = await response.json()\n      // console.log(\"busLine :::: \", busLine)\n      let BuslineTemp = []\n      // นำสายรถมาใส่ในตัวแปร โดยจัดรูปแบบใหม่\n      busLine.map(e => {\n        BuslineTemp.push({ data : e, show : false})\n      })\n      await this.setState({ busLine : BuslineTemp })\n    }\n    else {\n      // ถ้ามีคำค้นหา \n      const response = await fetch(`${SettingApp}/SearchBusStop?searchText=${this.state.searchTxt}`)\n      const busLine = await response.json()\n      let busLine2 = busLine[0]\n      let BuslineTemp = []\n      busLine2.map((e, key) => {\n        BuslineTemp.push({ data : e, show : false})\n      })\n      await this.setState({ busLine : BuslineTemp })\n    }\n  }\n\n\n  // ดึงข้อมูลตำแหน่งปัจจุบันของ User Code เป็น Pattle ของ getLocation\n  getLocation = async () => {\n    console.log('in geo')\n    navigator.geolocation.getCurrentPosition(\n      position => {\n        //// นำค่าที่ได้มาเก็บในตัวแปรที่ตั้งไว้\n        let latlng = {\n          latitude: parseFloat(JSON.stringify(position.coords.latitude)),\n          longitude: parseFloat(JSON.stringify(position.coords.longitude))\n        }\n        let region ={\n          latitude: parseFloat(JSON.stringify(position.coords.latitude)),\n          longitude: parseFloat(JSON.stringify(position.coords.longitude)),\n          latitudeDelta : this.state.region.latitudeDelta,\n          longitudeDelta : this.state.region.longitudeDelta\n        }\n        try {\n           AsyncStorage.setItem('@region', JSON.stringify(region));\n        } catch (error) {\n          console.log(error)\n        }\n        this.setState({ latlng , region  })\n        // console.log(\"re :::: \",this.state.region)\n      },\n      error => alert(error.message),\n      { enableHighAccuracy: true, timeout: 20000, maximumAge: 1000 }\n    )\n    this.watchID = await navigator.geolocation.watchPosition(position => {\n      let latlng = {\n        latitude: parseFloat(JSON.stringify(position.coords.latitude)),\n        longitude: parseFloat(JSON.stringify(position.coords.longitude))\n      }\n      let region ={\n        latitude: parseFloat(JSON.stringify(position.coords.latitude)),\n        longitude: parseFloat(JSON.stringify(position.coords.longitude)),\n        latitudeDelta : this.state.region.latitudeDelta,\n        longitudeDelta : this.state.region.longitudeDelta\n      }\n      try {\n        AsyncStorage.setItem('@region', JSON.stringify(region));\n      } catch (error) {\n        console.log(error)\n      }\n      this.setState({ latlng , region })\n    })\n  }\n\n  // ดึงข้อมูลรถที่กำลังวิ่งอยู่\n  fetchbusActiveData = async () => {\n    let {searchTxt, busLine} = this.state\n    let lineQuery = [] //สร้างตัวแปรสำหรับเก็บสายรถ\n    if(searchTxt == \"\"){ \n    const response = await fetch(`${SettingApp}/getVehicleActive`)\n    const BusActive = await response.json()\n    await this.setState({ BusActive})\n    }else { \n      busLine.map(item => {\n        lineQuery.push(item.data.busline_code)\n      })\n      const response = await fetch(`${SettingApp}/getVehicleActiveQuery?Vehicle_Type='bus'&lineQuery=${lineQuery}`)\n      const BusActive = await response.json()\n      await this.setState({ BusActive})\n    }\n  }\n\n  \n  componentWillUnmount = () => {\n    navigator.geolocation.clearWatch(this.watchID)\n    clearInterval(this.intervalID);\n  }\n\n  // เมื่อไม่ได้ทำการพิมพ์ค้นหา\n  onOutFocus = async () => {\n    Keyboard.dismiss()\n    await this.setState({ typing: false, searchTxt : '' })\n    await this.fetchData()\n    await this.fetchbusLineData()\n    await this.fetchbusActiveData()\n\n  }\n\n  // กดตกลงค้นหา\n  onSearchSubmit = async () => {\n    await this.setState({ typing: false })\n    await this.fetchData()\n    await this.fetchbusLineData()\n    await this.fetchbusActiveData()\n\n  }\n\n\n  // เปิดข้อมูลของแต่ละสาย\n  openDetail = (id) => {\n    let { busLine } = this.state;\n    // นำไอดีที่ได้มาเทียบกับข้อมูลเพื่อเปิดข้อมูลที่เลือก\n    const tempIndex = busLine.findIndex( e => {\n        return e.data.busline_code == id\n    });\n    busLine[tempIndex].show = !busLine[tempIndex].show;\n    this.setState({busLine});\n} \n\n  /// เก็บค่าที่ map ที่เปลี่ยนใน Localstorage\n  onRegionChangeComplete = async(region) => {\n    // console.log('onRegionChangeComplete ::: ', region);\n    try {\n      await AsyncStorage.setItem('@region', JSON.stringify(region));\n    } catch (error) {\n      console.log(error)\n    }\n  };\n\n  // เปิดเมนูและทำการเก็บค่าที่ map ที่เปลี่ยนใน Localstorage\n  openMenuFunc = async() => {\n    try {\n      const value = await AsyncStorage.getItem(\"@region\");\n      if (value !== null) {\n        await this.setState({ region: JSON.parse(value) });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ openMenu: !this.state.openMenu })\n  }\n\n\n  render() {\n    return (\n      <Drawer //Menu\n        ref={ref => (this._drawer = ref)}\n        type=\"static\"\n        content={ // Content ที่จะโชว์ Menu\n          <ScrollView style={styles.containerIn}>\n            <TouchableOpacity\n              style={styles.buttonActive}\n              onPress={() => this.goto(\"Menu\")}\n            >\n              <Image\n                style={styles.MenuItem}\n                source={require(\"../assets/icon/home.png\")}\n              />\n              <Text style={styles.TextItem}>หน้าแรก </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={styles.button}\n              onPress={() => this.goto(\"Profile\")}\n            >\n              <Image\n                style={styles.MenuItem}\n                source={require(\"../assets/icon/profile.png\")}\n              />\n              <Text style={styles.TextItem}>ข้อมูลส่วนตัว</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={styles.button}\n              onPress={() => this.goto(\"logout\")}\n            >\n              <Image\n                style={styles.MenuItem}\n                source={require(\"../assets/icon/logout.png\")}\n              />\n              <Text style={styles.TextItem}>ออกจากระบบ</Text>\n            </TouchableOpacity>\n          </ScrollView>\n        }\n        styles={{\n          main: { shadowColor: \"#000000\", shadowOpacity: 0.3, shadowRadius: 15 }\n        }}\n        captureGestures={false}\n        tweenDuration={100}\n        panThreshold={0.08}\n        disabled={this.state.drawerDisabled}\n        openDrawerOffset={viewport => {\n          return 160;\n        }}\n        closedDrawerOffset={() => 1}\n        negotiatePan\n      >\n        <View style={styles.container}>\n        <StatusBar barStyle=\"dark-content\" />\n        <MapView\n          provider={PROVIDER_GOOGLE} // remove if not using Google Maps\n          style={styles.map}\n          onRegionChange={this.onRegionChangeComplete}\n          region={this.state.region}\n        >\n         \n          {this.state.busStop.map((marker, key) => {\n            let LatLng = {\n              latitude: parseFloat(marker.latitude),\n              longitude: parseFloat(marker.longitude)\n            }\n            return (\n              <Marker\n                key={key}\n                coordinate={LatLng}\n                title={marker.busstop_name}\n                description={marker.description}\n              >\n                <BusStopIcon textLine={marker.busline_name} />\n              </Marker>\n            )\n          })}\n          {/* นำค่ารถที่กำลังวิ่งอยู่มาแสดง */}\n          {this.state.BusActive.map((marker, key) => {\n            let LatLng = {\n              latitude: parseFloat(marker.lat) || 10000,\n              longitude: parseFloat(marker.lon) || 10000\n            }\n            return (\n              <Marker\n                key={key}\n                coordinate={LatLng}\n                title={marker.busstop_name}\n                description={marker.Vehicle_Name}\n              >\n                { \n                marker.Vehicle_Type == \"Bus\" && marker.BreakDown_Status == 0 ? <BusActive textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Bus\" && marker.BreakDown_Status == 1 ? <BusBreakDown textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Boat\" && marker.BreakDown_Status == 0 ? <BoatActive textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Boat\" && marker.BreakDown_Status == 1 ? <BoatBreakDown textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Van\" && marker.BreakDown_Status == 0 ? <VanActive textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Van\" && marker.BreakDown_Status == 1 ? <VanBreakDown textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Truck\" && marker.BreakDown_Status == 0 ? <TruckActive textLine={marker.busline_code}   /> : \n                marker.Vehicle_Type == \"Truck\" && marker.BreakDown_Status == 1 ? <TruckBreakDown textLine={marker.busline_code}   /> : <></>                \n                }\n              </Marker>\n            )\n          })}\n          {/* นำค่าตำแหน่งปัจจุบันของ User มา Show*/}\n           <Marker\n            coordinate={this.state.latlng}\n            title={this.state.markers.title}\n            description={this.state.markers.description}\n          >\n            <View>\n              <Image\n                source={require(\"../assets/icon/self-map-marker.png\")}\n                style={{ width: 70, height: 70, zIndex : 100 }}\n              />\n              {/* <Text>คุณอยู่ที่นี่</Text> */}\n            </View>\n          </Marker>\n        </MapView>\n{/* //////////////////////////////////////////////////////////////// */}\n\n        <MenuSlide\n          openMenu={this.state.openMenu}\n        >\n         <TouchableOpacity style={{width : Dimensions.get(\"window\").width}} onPress={() => this.openMenuFunc()}>\n            <TextMenuSlide openMenu={this.state.openMenu}>Bus</TextMenuSlide>\n         </TouchableOpacity>\n          <TouchableOpacity style={styles.Line} onPress={() => this.openMenuFunc()}/>\n          <ScrollView >\n            {this.state.busLine.map((item, key) => (\n              // <View key={key}></View>\n              <BusStopDetail key={key} data={item.data} show={item.show} openDetail={this.openDetail} />\n            ))}\n          </ScrollView>\n        </MenuSlide>\n\n{/* //////////////////////////////////////////////////////////////// */}\n\n        <SearchTab typing={this.state.typing}>\n          <Image\n            source={require(\"../assets/icon/search.png\")}\n            style={{ width: 30, height: 30}}\n            onPress={() => this.setState({ typing: false })}\n          />\n\n          {/* <KeyboardAwareScrollView styles={{}}> */}\n          <TextInput\n            placeholder=\"Where to ?\"\n            style={styles.InputStyle}\n            onChangeText={searchTxt => this.setState({ searchTxt })}\n            value={this.state.searchTxt}\n            blurOnSubmit={true}\n            onFocus={() => this.setState({ typing: true })}\n            onSubmitEditing={() => this.onSearchSubmit()}\n          />\n          {/* </KeyboardAwareScroll=View> */}\n\n          {this.state.typing && (\n            <TouchableOpacity onPress={() => this.onOutFocus()}>\n              <Image\n                source={require(\"../assets/icon/close.png\")}\n                style={{ width: 20, height: 20 }}\n              />\n            </TouchableOpacity>\n          )}\n        </SearchTab>\n\n        {/* ///////////////////////////////////////////////////// */}\n      </View>\n      </Drawer>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  // container: {\n  //   flex: 2,\n  //   justifyContent: \"center\",\n  //   alignItems: \"center\",\n  //   backgroundColor: \"white\"\n  // },\n  menuFlex: {\n    flexDirection: \"row\"\n  },\n  LogoStyle: {\n    width: 130,\n    height: 130,\n    marginBottom: 50,\n    resizeMode: \"contain\"\n  },\n  space: {\n    width: 30\n  },\n  containerIn: {\n    backgroundColor: \"white\",\n    flex: 1\n  },\n  button: {\n    backgroundColor: \"white\",\n    padding: 10,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingStart: 20,\n    paddingTop: 25,\n    paddingBottom: 25,\n    borderBottomColor: \"#1C19CC\",\n    borderBottomWidth: 1\n  },\n  buttonActive: {\n    backgroundColor: \"lightgrey\",\n    padding: 10,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingStart: 20,\n    paddingTop: 25,\n    paddingBottom: 25,\n    borderBottomColor: \"#1C19CC\",\n    borderBottomWidth: 1\n  },\n  MenuStyle: {\n    width: 25,\n    height: 25,\n    marginLeft: 15\n  },\n  MenuItem: {\n    width: 25,\n    height: 25,\n    marginRight: 20\n  },\n  TextItem: {\n    fontSize: 20,\n    color: \"#1C19CC\"\n  },\n  container: {\n    flex: 3,\n    justifyContent: \"flex-end\",\n    alignItems: \"center\"\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject\n  },\n  Line: {\n    width: 90,\n    height: 6,\n    backgroundColor: \"rgb(71, 69, 245)\",\n    top: 0,\n    position: \"absolute\",\n    borderRadius: 50,\n    marginTop: 10\n  },\n  ViewFlex: {\n    width : width-70,\n    flexDirection: \"row\",\n    paddingTop : 20,\n    paddingBottom : 20,\n    marginStart :30,\n    marginEnd : 30,\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    borderBottomWidth : 1,\n    borderBottomColor : 'rgba(255,255,255,0.5)',\n  },\n  LineFlex: {\n   marginTop : 20,\n    width: 300,\n    height: 0.5,\n    backgroundColor: \"rgba(255,255,255,0.5)\",\n    borderRadius: 50,\n  },\n  InputStyle: {\n    marginTop: 20,\n    paddingBottom: 20,\n    fontSize: 30,\n    width: 250,\n    textAlign: \"center\",\n    color: \"rgb(29, 25, 204)\"\n  }\n});\n\n\n\nlet width = Dimensions.get(\"window\").width\nlet height = Dimensions.get(\"window\").height\n\nconst MenuSlide = styled(View)`\n  width: ${width};\n  height: ${props => props.openMenu ? 500 : 150};\n  position:absolute;\n  top:${props => props.openMenu ? 250 : height-250};   \n  backgroundColor: 'rgb(29,25,204)';\n  borderRadius: 60;\n  borderBottomEndRadius :  0;\n  borderBottomStartRadius :  0;\n  borderWidth: 0;\n  justifyContent: flex-start;\n  alignItems: center;\n  paddingTop : 15;\n  paddingBottom : 50;\n`;\n\nconst SearchTab = styled(View)`\n  width: ${width};\n  height: 90;\n  backgroundColor: white;\n  borderRadius: 60;\n  borderBottomEndRadius :  0;\n  borderBottomStartRadius :  0;\n  borderWidth: 0;\n  justifyContent: center;\n  alignItems: center;\n  marginTop : ${height-180};\n  marginBottom : ${props => props.typing ? 300 : 0}\n  flexDirection: row;\n`;\n\nconst TextMenuSlide = styled(Text)`\n  fontSize: 30;\n  color: 'rgb(101,102,251)';\n  textAlign: center;\n  paddingLeft: 10;\n  paddingRight: 10;\n  marginTop: 10;\n`"]},"metadata":{},"sourceType":"module"}